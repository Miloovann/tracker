<!DOCTYPE html>
<html lang="en">
    <head>
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z" crossorigin="anonymous">
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <link href="https://fonts.googleapis.com/css2?family=Roboto&display=swap" rel="stylesheet">
        <title>COVID Hunter</title>
        <style>
            html, body{
                margin: 5;
                padding: 10px;
                font-family: 'Roboto', sans-serif;
                background-color: whitesmoke;
            }
            #navbar{
                margin: 0;
                padding: 0;
                width: 80%;
                height: 50px;
                background-color: #2196f3;
                color: white;
                position: fixed;
            }
            #logo{
                height: 40px;
                border-radius: 5px;
                display: inline-block;
                float: left;
                margin-left: 10px;
                margin-top: 5px;
                margin-bottom: 5px;
            }
            #stats{
                display: inline-block;
                float: right;
                height: 40px;
                margin-top: 5px;
                margin-bottom: 5px;
                font-size: 20px;
                margin-right: 10px;
                width: 50%;
                text-align: right;
            }
            #rightbar{
                width: 20%;
                background-color: #000;
                height: 120%;
                display: inline-block;
                padding: 0;
                border: none;
                position: fixed;
                top: 0;
                right: 0;
                color: white;
            }
            #rightbar * {
                padding-left: 10px;
                padding-right: 10px;
            }
            @media only screen and (max-width: 992px){
            #rightbar {
              display: none;
            }
            #newsandprotection{
                width: 80%;
                height: 50px;
                background-color: #111D4A;
                margin: 0;
                padding: 0;
                color: white;
                margin-top: 50px;
                position: fixed;
            }
            #main{
                width: 80%;
                padding-top: 150px;
                padding-left: 20px;
                padding-right: 20px;
                text-align: justify;
                height: 100%;
            }
            .hover:hover{
                cursor: pointer;
            }
            #navforstats p{
                display: inline-block;
                margin-left: 1%;
                margin-right: 1%;
            }
            #navforstats{
                width: 100%;
                text-align: center;
                margin: 0;
            }
            #logotxt{
                font-size: 30px;
                display: inline-block;
                margin: 10px;
            }
        </style>
        <style>
            .dropbtn {
              background-color: #93cff1;
              border-radius: 20px;
              color: black;
              padding: 16px;
              font-size: 16px;
              border: none;
            }
            .dropdown {
              position: relative;
              display: inline-block;
            }
            .dropdown-content {
              display: none;
              border-radius: 20px;
              position: absolute;
              margin-left: 10px;
              padding-left: 5px;
              background-color: #93cff1;
              min-width: 60px;
              box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
              z-index: 1;
            }
            .dropdown-content a {
              color: black;
              border-radius: 20px;
              padding: 160px;
              text-decoration: none;
              display: block;
            }
            .dropdown-content a:hover {background-color: #ddd;}
            .dropdown:hover .dropdown-content {display: block;}
            .dropdown:hover .dropbtn {background-color: transparent;}
        </style>
        <style>
            .dropbtncom {
              background-color: #93cff1;
              border-radius: 20px;
              color: black;
              padding: 16px;
              font-size: 16px;
              border: none;
            }
            .dropdowncom {
              position: relative;
              display: inline-block;
            }
            .dropdowncom-content {
              display: none;
              border-radius: 20px;
              position: absolute;
              margin-left: 10px;
              padding-left: 5px;
              background-color: #93cff1;
              min-width: 60px;
              box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
              z-index: 1;
            }
            .dropdowncom-content a {
              color: black;
              border-radius: 20px;
              padding: 160px;
              text-decoration: none;
              display: block;
            }
            .dropdowncom-content a:hover {background-color: #ddd;}
            .dropdowncom:hover .dropdowncom-content {display: block;}
            .dropdowncom:hover .dropbtncom {background-color: transparent;}
        </style>
        <style>
            .dropbtnimported {
              background-color: #93cff1;
              border-radius: 20px;
              color: black;
              padding: 16px;
              font-size: 16px;
              border: none;
            }
            .dropdownimported {
              position: relative;
              display: inline-block;
            }
            .dropdownimported-content {
              display: none;
              border-radius: 20px;
              position: absolute;
              margin-left: 10px;
              padding-left: 5px;
              background-color: #93cff1;
              min-width: 60px;
              box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
              z-index: 1;
            }
            .dropdownimported-content a {
              color: black;
              border-radius: 20px;
              padding: 160px;
              text-decoration: none;
              display: block;
            }
            .dropdownimported-content a:hover {background-color: #ddd;}
            .dropdownimported:hover .dropdownimported-content {display: block;}
            .dropdownimported:hover .dropbtnimported {background-color: transparent;}
        </style>
        <style>
            .dropbtndorm {
              background-color: #93cff1;
              border-radius: 20px;
              color: black;
              padding: 16px;
              font-size: 16px;
              border: none;
            }
            .dropdowndorm {
              position: relative;
              display: inline-block;
            }
            .dropdowndorm-content {
              display: none;
              border-radius: 20px;
              position: absolute;
              margin-left: 10px;
              padding-left: 5px;
              background-color: #93cff1;
              min-width: 60px;
              box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
              z-index: 1;
            }
            .dropdowndorm-content a {
              color: black;
              border-radius: 20px;
              padding: 160px;
              text-decoration: none;
              display: block;
            }
            .dropdowndorm-content a:hover {background-color: #ddd;}
            .dropdowndorm:hover .dropdowndorm-content {display: block;}
            .dropdowndorm:hover .dropbtndorm {background-color: transparent;}
        </style>
        <style>
            .dropbtntotal {
              background-color: #93cff1;
              border-radius: 20px;
              color: black;
              padding: 16px;
              font-size: 16px;
              border: none;
            }
            .dropdowntotal {
              position: relative;
              display: inline-block;
            }
            .dropdowntotal-content {
              display: none;
              border-radius: 20px;
              position: absolute;
              margin-left: 10px;
              padding-left: 5px;
              background-color: #93cff1;
              min-width: 60px;
              box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
              z-index: 1;
            }
            .dropdowntotal-content a {
              color: black;
              border-radius: 20px;
              padding: 160px;
              text-decoration: none;
              display: block;
            }
            .dropdowntotal-content a:hover {background-color: #ddd;}
            .dropdowntotal:hover .dropdowntotal-content {display: block;}
            .dropdowntotal:hover .dropbtntotal {background-color: transparent;}
        </style>
    </head>
    
    <body onload='filter("int"); sgfilter("minus1"); comfilter("communitylinesg"); dormfilter("dormlinesg"); importedfilter("importedlinesg"); totalfilter("totallinesg")'>
        <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js" integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" crossorigin="anonymous"></script>
        <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js" integrity="sha384-B4gt1jrGC7Jh4AgTPSdUtOBvfO8shuf57BaghqFfPlYxofvL8/KUEfYiJOMMV+rV" crossorigin="anonymous"></script>
        
        <nav class="navbar navbar-expand-lg navbar-dark bg-primary fixed-top">
            <a class="navbar-brand showdesktop" href="https://covidhunter.netlify.app">
                <img src="logo.png" alt="" class="img-logo" style="width:50px; color:whitesmoke" >
                    Covid Hunter
            </a>
            <a href="https://www.cdc.gov/coronavirus/2019-ncov/if-you-are-sick/steps-when-sick.html" target="_blank" style="text-decoration: none;">
                <span style="color: white;font-size:30px;">Precautions  </span>
            </a>
            &emsp;
            <a href="https://www.instagram.com/miloovann/" target="_blank" style="text-decoration: none;">
                <span style="color: whitesmoke;font-size:30px;">Developer</span>
            </a>

        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon "></span>
        </button>

        <div class="collapse navbar-collapse justify-content-center" id="navbarNavAltMarkup">
            <ul class="navbar-nav">
                <li class="nav-item">
                    <p class="hover nav-item nav-link" onclick="filter('int')" style="font-size:25px; color:white">Global</p>
                </li>
                <li class="nav-item">
                    <p class="hover nav-item nav-link" onclick="filter('singapore')" style="font-size:25px; color:white">Singapore</p>
                </li>
                <li class="nav-item">
                    <p class="hover nav-item nav-link" onclick="filter('afc')" style="font-size:25px; color:white">Africa</p>
                </li>
                <li class="nav-item">
                    <p class="hover nav-item nav-link" onclick="filter('asa')" style="font-size:25px; color:white">Asia</p>
                </li>
                <li class="nav-item">
                    <p class="hover nav-item nav-link" onclick="filter('aus')" style="font-size:25px; color:white">Australia/Oceania</p>
                </li>
                <li class="nav-item">
                    <p class="hover nav-item nav-link" onclick="filter('eu')" style="font-size:25px; color:white">Europe</p>
                </li>
                <li class="nav-item">
                    <p class="hover nav-item nav-link" onclick="filter('nam')" style="font-size:25px; color:white">North America</p>
                </li>
                <li class="nav-item">
                    <p class="hover nav-item nav-link" onclick="filter('sam')" style="font-size:25px; color:white">South America</p>
                </li>
            </ul>
        </div>

        </nav>

        <div id="rightbar">
            <br>
            <br>
            <br>
            <br>
            <br>
            <h2>WorldWide Data</h2>
            <div id="infection">
                <h3>Total Cases: </h3>
                <p id="total_cases" style = "font-size:20px;"></p>
                <hr>
                <h3>Total Deaths: </h3>
                <p id="total_deaths" style = "font-size:20px;"></p>
                <hr>
                <h3>Total Recovered: </h3>
                <p id="total_recovered" style = "font-size:20px;"></p>
                <p id = "timedif" style="font-size: 20px"></p>
            </div>
        </div>

        <div class="int" style="padding-top: 130px;">
            <img src = "worldwidetotal10.svg" style="width: 26%;">
            <img src = "worldwidedeath10.svg" style="width: 26%;">
            <img src = "worldwiderecovered10.svg" style="width: 26%;">
            <div id = "globaltable"></div>
            <p>*If data is consistent across all sources, reliability is 1.
                If data is inconsistent and is retrieved solely from worldometers, reliability is 0</p>
        </div>

        <div class="singapore" style="padding-top: 130px;">

            <div>
                <div class="dropdowntotal">
                    <button class="dropbtntotal">All Cases Graphs</button>
                    <div class="dropdowntotal-content">
                        <p class="hover" onclick="totalfilter('totalbarsg')" style="font-size:16px">Bar</p>
                        <p class="hover" onclick="totalfilter('totallinesg')" style="font-size:16px">Line</p>
                    </div>
                </div>
                <img id = "totalbarsg" src="SGtotalbar14D.svg" style='width:40%'>
                <img id = "totallinesg" src="SGtotalline14D.svg" style='width:40%'>
            </div>

            <div>
                <p></p>
                <div class="dropdowncom">
                    <button class="dropbtncom">Community Graphs</button>
                    <div class="dropdowncom-content">
                        <p class="hover" onclick="comfilter('communitybarsg')" style="font-size:16px">Bar</p>
                        <p class="hover" onclick="comfilter('communitylinesg')" style="font-size:16px">Line</p>
                    </div>
                </div>
                <img id = "communitybarsg" src="SGcommunitybar14D.svg" style='width:40%'>
                <img id = "communitylinesg" src="SGcommunityline14D.svg" style='width:40%'>
            </div>

            <div>
                <p></p>
                <div class="dropdownimported">
                    <button class="dropbtnimported">Imported Graphs</button>
                    <div class="dropdownimported-content">
                        <p class="hover" onclick="importedfilter('importedbarsg')" style="font-size:16px">Bar</p>
                        <p class="hover" onclick="importedfilter('importedlinesg')" style="font-size:16px">Line</p>
                    </div>
                </div>
                <img id = "importedbarsg" src="SGimportedbar14D.svg" style='width:40%'>
                <img id = "importedlinesg" src="SGimportedline14D.svg" style='width:40%'>
            </div>

            <div>
                <p></p>
                <div class="dropdowndorm">
                    <button class="dropbtndorm">Dorm Graphs</button>
                    <div class="dropdowndorm-content">
                        <p class="hover" onclick="dormfilter('dormbarsg')" style="font-size:16px">Bar</p>
                        <p class="hover" onclick="dormfilter('dormlinesg')" style="font-size:16px">Line</p>
                    </div>
                </div>
                <img id = "dormbarsg" src="SGdormbar14D.svg" style='width:40%'>
                <img id = "dormlinesg" src="SGdormline14D.svg" style='width:40%'>
            </div>

            <div>
                <p></p>
                <div class="dropdown">
                    <button class="dropbtn">Date</button>
                    <div class="dropdown-content">
                        <div id="ddown"></div>
                    </div>
                </div>
                <div id="slideContainer"></div>
            </div>
        </div>
        <div class="eu" style="padding-top: 130px;">
            <img src = "europetotal10.svg" style="width: 26%;">
            <img src = "europedeath10.svg" style="width: 26%;">
            <img src = "europerecovered10.svg" style="width: 26%;">
            <div id = "eutable"></div>
            <p>*True means that data is consistent across all sources, False means that data is inconsistent and is retrieved solely from worldometers</p>
        </div>
        <div class="asa" style="padding-top: 130px;">
            <img src = "asiatotal10.svg" style="width: 26%;">
            <img src = "asiadeath10.svg" style="width: 26%;">
            <img src = "asiarecovered10.svg" style="width: 26%;">
            <div id = "asatable"></div>
            <p>*If data is consistent across all sources, reliability is 1.
                If data is inconsistent and is retrieved solely from worldometers, reliability is 0</p>
        </div>
        <div class="afc" style="padding-top: 130px;">
            <img src = "africatotal10.svg" style="width: 26%;">
            <img src = "africadeath10.svg" style="width: 26%;">
            <img src = "africarecovered10.svg" style="width: 26%;">
            <div id = "afrtable"></div>
            <p>*If data is consistent across all sources, reliability is 1.
                If data is inconsistent and is retrieved solely from worldometers, reliability is 0</p>
        </div>
        <div class="aus" style="padding-top: 130px;">
            <img src = "AustraliaOceaniatotal10.svg" style="width: 26%;">
            <img src = "AustraliaOceaniadeath10.svg" style="width: 26%;">
            <img src = "AustraliaOceaniarecovered10.svg" style="width: 26%;">
            <div id = "austable"></div>
            <p>*True means that data is consistent across all sources, False means that data is inconsistent and is retrieved solely from worldometers</p>
        </div>
        <div class="nam" style="padding-top: 130px;">
            <img src = "north Americatotal10.svg" style="width: 26%;">
            <img src = "north Americadeath10.svg" style="width: 26%;">
            <img src = "north Americarecovered10.svg" style="width: 26%;">
            <div id = "namtable"></div>
            <p>*If data is consistent across all sources, reliability is 1.
                If data is inconsistent and is retrieved solely from worldometers, reliability is 0</p>
        </div>
        <div class="sam" style="padding-top: 130px;">
            <img src = "south Americatotal10.svg" style="width: 26%;">
            <img src = "south Americadeath10.svg" style="width: 26%;">
            <img src = "south Americarecovered10.svg" style="width: 26%;">
            <div id = "samtable"></div>
            <p>*If data is consistent across all sources, reliability is 1.
                If data is inconsistent and is retrieved solely from worldometers, reliability is 0</p>
        </div>
    </body>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script>
        //SG Pie
        function sgdatelink(){
            var fortnight = [];
            for(var days=1; days<15; days++){
                var date = new Date();
                var last = new Date(date.getTime() - (days * 24 * 60 * 60 * 1000));
                var day =last.getDate();
                var month=last.getMonth();
                if(month===0){month = 'Jan';}
                else if(month===1){month = 'Feb';}            
                else if(month===2){month = 'Mar';}
                else if(month===3){month = 'Apr';}
                else if(month===4){month = 'May';}
                else if(month===5){month = 'Jun';}
                else if(month===6){month = 'Jul';}
                else if(month===7){month = 'Aug';}
                else if(month===8){month = 'Sep';}
                else if(month===9){month = 'Oct';}
                else if(month===10){month = 'Nov';}
                else if(month===11){month = 'Dec';}
                fortnight.push(day+' '+month)
                document.getElementById('minus'+days).setAttribute('src', 'SG '+day+' '+month+' Cases.svg');
            }
            return fortnight;
        }
        var slides = ["minus1","minus2","minus3", "minus4", "minus5","minus6", "minus7", "minus8","minus9", "minus10", "minus11", "minus12", "minus13","minus14"]
        var str = ''
        slides.forEach(function(slide) {
            str += '<img id ='+ slide + '>';
        });
        document.getElementById("slideContainer").innerHTML = str;
        
        var weeks = sgdatelink();
        var drop = ''
        for(var iter=0; iter<14; iter++){
            drop += '<p class="hover" onclick="sgfilter(' + "'" +slides[iter] + "'" + ')" style="font-size:16px">' + weeks[iter] + "</p>"
        }
        document.getElementById("ddown").innerHTML = drop;
        //End SG Pie

        var today = new Date();
        var m = today.getMonth();
        var d = today.getDate();
        if(m===0){m = 'January';}
        else if(m===1){m = 'February';}            
        else if(m===2){m = 'March';}
        else if(m===3){m = 'April';}
        else if(m===4){m = 'May';}
        else if(m===5){m = 'June';}
        else if(m===6){m = 'July';}
        else if(m===7){m = 'August';}
        else if(m===8){m = 'September';}
        else if(m===9){m = 'October';}
        else if(m===10){m = 'November';}
        else if(m===11){m = 'December';}

        // start csv
        $.get(m+d+"all.csv", function(data) {
            var build = '<table border="1" cellpadding="2" cellspacing="0" style="border-collapse: collapse" width="80%">\n';
            var head = data.split("\n");
            for (var i = 0; i < 1; i++) {
                build += "<tr>";
                currentRow = head[i].split(",");
                for (let i2 = 0; i2 < currentRow.length; i2++) {
                    build += `<th>${currentRow[i2]}</th>`;
                }
                build += "</tr>";
            }
            for (var i = 1; i < head.length; i++) {
                build += "<tr>";
                currentRow = head[i].split(",");
                if (currentRow.length === 8){
                    for (let i2 = 0; i2 < currentRow.length; i2++) {
                        build += `<td>${currentRow[i2]}</td>`;
                    }
                }
                build += "</tr>";
            }
            build += "</table>";
            document.getElementById("globaltable").innerHTML = build;
        });

        $.get(m+d+"africa"+"all.csv", function(data) {
            var build = '<table border="1" cellpadding="2" cellspacing="0" style="border-collapse: collapse" width="80%">\n';
            var head = data.split("\n");
            for (var i = 0; i < 1; i++) {
                build += "<tr>";
                currentRow = head[i].split(",");
                for (let i2 = 0; i2 < currentRow.length; i2++) {
                    build += `<th>${currentRow[i2]}</th>`;
                }
                build += "</tr>";
            }
            for (var i = 1; i < head.length; i++) {
                build += "<tr>";
                currentRow = head[i].split(",");
                if (currentRow.length === 8){
                    for (let i2 = 0; i2 < currentRow.length; i2++) {
                        build += `<td>${currentRow[i2]}</td>`;
                    }
                }
                build += "</tr>";
            }
            build += "</table>";
            document.getElementById("afrtable").innerHTML = build;
        });

        $.get(m+d+"northamerica"+"all.csv", function(data) {
            var build = '<table border="1" cellpadding="2" cellspacing="0" style="border-collapse: collapse" width="80%">\n';
            var head = data.split("\n");
            for (var i = 0; i < 1; i++) {
                build += "<tr>";
                currentRow = head[i].split(",");
                for (let i2 = 0; i2 < currentRow.length; i2++) {
                    build += `<th>${currentRow[i2]}</th>`;
                }
                build += "</tr>";
            }
            for (var i = 1; i < head.length; i++) {
                build += "<tr>";
                currentRow = head[i].split(",");
                if (currentRow.length === 8){
                    for (let i2 = 0; i2 < currentRow.length; i2++) {
                        build += `<td>${currentRow[i2]}</td>`;
                    }
                }
                build += "</tr>";
            }
            build += "</table>";
            document.getElementById("namtable").innerHTML = build;
        });

        $.get(m+d+"southamerica"+"all.csv", function(data) {
            var build = '<table border="1" cellpadding="2" cellspacing="0" style="border-collapse: collapse" width="80%">\n';
            var head = data.split("\n");
            for (var i = 0; i < 1; i++) {
                build += "<tr>";
                currentRow = head[i].split(",");
                for (let i2 = 0; i2 < currentRow.length; i2++) {
                    build += `<th>${currentRow[i2]}</th>`;
                }
                build += "</tr>";
            }
            for (var i = 1; i < head.length; i++) {
                build += "<tr>";
                currentRow = head[i].split(",");
                if (currentRow.length === 8){
                    for (let i2 = 0; i2 < currentRow.length; i2++) {
                        build += `<td>${currentRow[i2]}</td>`;
                    }
                }
                build += "</tr>";
            }
            build += "</table>";
            document.getElementById("samtable").innerHTML = build;
        });

        $.get(m+d+"asia"+"all.csv", function(data) {
            var build = '<table border="1" cellpadding="2" cellspacing="0" style="border-collapse: collapse" width="80%">\n';
            var head = data.split("\n");
            for (var i = 0; i < 1; i++) {
                build += "<tr>";
                currentRow = head[i].split(",");
                for (let i2 = 0; i2 < currentRow.length; i2++) {
                    build += `<th>${currentRow[i2]}</th>`;
                }
                build += "</tr>";
            }
            for (var i = 1; i < head.length; i++) {
                build += "<tr>";
                currentRow = head[i].split(",");
                if (currentRow.length === 8){
                    for (let i2 = 0; i2 < currentRow.length; i2++) {
                        build += `<td>${currentRow[i2]}</td>`;
                    }
                }
                build += "</tr>";
            }
            build += "</table>";
            document.getElementById("asatable").innerHTML = build;
        });

        $.get(m+d+"AustraliaOceania"+"all.csv", function(data) {
            var build = '<table border="1" cellpadding="2" cellspacing="0" style="border-collapse: collapse" width="80%">\n';
            var head = data.split("\n");
            for (var i = 0; i < 1; i++) {
                build += "<tr>";
                currentRow = head[i].split(",");
                for (let i2 = 0; i2 < currentRow.length; i2++) {
                    build += `<th>${currentRow[i2]}</th>`;
                }
                build += "</tr>";
            }
            for (var i = 1; i < head.length; i++) {
                build += "<tr>";
                currentRow = head[i].split(",");
                if (currentRow.length === 8){
                    for (let i2 = 0; i2 < currentRow.length; i2++) {
                        build += `<td>${currentRow[i2]}</td>`;
                    }
                }
                build += "</tr>";
            }
            build += "</table>";
            document.getElementById("austable").innerHTML = build;
        });

        $.get(m+d+"europe"+"all.csv", function(data) {
            var build = '<table border="1" cellpadding="2" cellspacing="0" style="border-collapse: collapse" width="80%">\n';
            var head = data.split("\n");
            for (var i = 0; i < 1; i++) {
                build += "<tr>";
                currentRow = head[i].split(",");
                for (let i2 = 0; i2 < currentRow.length; i2++) {
                    build += `<th>${currentRow[i2]}</th>`;
                }
                build += "</tr>";
            }
            for (var i = 1; i < head.length; i++) {
                build += "<tr>";
                currentRow = head[i].split(",");
                if (currentRow.length === 8){
                    for (let i2 = 0; i2 < currentRow.length; i2++) {
                        build += `<td>${currentRow[i2]}</td>`;
                    }
                }
                build += "</tr>";
            }
            build += "</table>";
            document.getElementById("eutable").innerHTML = build;
        });
        // end csv

        //Start Right Bar collection
        $(document).ready(function(){
            $.ajax({
                type: "GET",
                url: m+d+"all.csv",
                dataType: "text",
                success: function(data) {processData(data);}
            });
        });
        var lines = [];
        function processData(allText) {
        var allTextLines = allText.split(/\r\n|\n/);
        var headers = allTextLines[0].split(',');
        var i=212;
        var data = allTextLines[i].split(',');
        if (data.length == headers.length) {
            var tarr = [];
            for (var j=0; j<headers.length; j++) {
                tarr.push(headers[j]);
                tarr.push(data[j]);
            }
            lines.push(tarr);
        }
        function lengthof(a){
            for (var k=0; k<10000; k++){
                if(a[k] === undefined){
                    return k;
                    break;
                }
            }
        }
        function splitstring(a){
            var s = "";
            q = lengthof(a);
            special = q%3;
            counter = 0;
            for (var j=0; j<q; j++){
            if (counter >= special){
            if ((j-special)%3===0&&j!==0){
                s += ",";
            }
            }
                s+=a[j];
            counter +=1;
            }
            return s;
        }
        document.getElementById('total_cases').innerHTML = splitstring(lines[0][3]);
        document.getElementById('total_deaths').innerHTML = splitstring(lines[0][7]);
        document.getElementById('total_recovered').innerHTML = splitstring(lines[0][11]);
        }
        //End Right Bar Collection

        //Start Filter Function to automatically set a initial page 
        function filter(a){
            inter = document.getElementsByClassName('int');
            singapore = document.getElementsByClassName('singapore');
            eu = document.getElementsByClassName('eu');
            asa = document.getElementsByClassName('asa');
            aus = document.getElementsByClassName('aus');
            afc = document.getElementsByClassName('afc');
            nam = document.getElementsByClassName('nam');
            sam = document.getElementsByClassName('sam');
            for(var i=0; i<inter.length; i++)       {inter[i].style.display = 'none';}
            for(var i=0; i<singapore.length;i++)    {singapore[i].style.display = 'none';}
            for(var i=0; i<eu.length; i++)          {eu[i].style.display = 'none';}
            for(var i=0; i<asa.length; i++)         {asa[i].style.display = 'none';}
            for(var i=0; i<aus.length; i++)         {aus[i].style.display = 'none';}
            for(var i=0; i<afc.length; i++)         {afc[i].style.display = 'none';}
            for(var i=0; i<nam.length; i++)         {nam[i].style.display = 'none';}
            for(var i=0; i<sam.length; i++)         {sam[i].style.display = 'none';}
            b = document.getElementsByClassName(a);
            for(var i=0; i<b.length; i++)       {b[i].style.display = 'inline-block';}
        }
        //End Filter Function 1.0

        //Start Filter Function to set auto sg graph
        function sgfilter(a){
            minus1 = document.getElementById('minus1').style.display = 'none';
            minus2 = document.getElementById('minus2').style.display = 'none';
            minus3 = document.getElementById('minus3').style.display = 'none';
            minus4 = document.getElementById('minus4').style.display = 'none';
            minus5 = document.getElementById('minus5').style.display = 'none';
            minus6 = document.getElementById('minus6').style.display = 'none';
            minus7 = document.getElementById('minus7').style.display = 'none';
            minus8 = document.getElementById('minus8').style.display = 'none';
            minus9 = document.getElementById('minus9').style.display = 'none';
            minus10 = document.getElementById('minus10').style.display = 'none';
            minus11 = document.getElementById('minus11').style.display = 'none';
            minus12 = document.getElementById('minus12').style.display = 'none';
            minus13 = document.getElementById('minus13').style.display = 'none';
            minus14 = document.getElementById('minus14').style.display = 'none';
            b = document.getElementById(a).style.display = 'inline-block';
        }
        //End Filter Function 2.0

        //Start Comm Filter Function
        function comfilter(a){
            communitybarsg = document.getElementById('communitybarsg').style.display = 'none';
            communitylinesg = document.getElementById('communitylinesg').style.display = 'none';
            b = document.getElementById(a).style.display = 'inline-block';
        }
        //End Filter Functiom Comm

        //Start dorm Filter Function
        function dormfilter(a){
            dormbarsg = document.getElementById('dormbarsg').style.display = 'none';
            dormlinesg = document.getElementById('dormlinesg').style.display = 'none';
            b = document.getElementById(a).style.display = 'inline-block';
        }
        //End Filter Function dorm

        //Start total Filter Function
        function totalfilter(a){
            totalbarsg = document.getElementById('totalbarsg').style.display = 'none';
            totallinesg = document.getElementById('totallinesg').style.display = 'none';
            b = document.getElementById(a).style.display = 'inline-block';
        }
        //End Filter Function total

        //Start imported Filter Function
        function importedfilter(a){
            importedbarsg = document.getElementById('importedbarsg').style.display = 'none';
            importedlinesg = document.getElementById('importedlinesg').style.display = 'none';
            b = document.getElementById(a).style.display = 'inline-block';
        }
        //End Filter Function imported

        function timeFunc(){
            fetch('/updatetiming.txt')
                .then(response => response.text())
                .then(data => {
                    console.log(data)
                    var units = " second"
                    var upd = data.split(" ");
                    var prev = new Date(upd[0],upd[1],upd[2],upd[3],upd[4],upd[5]);
                    console.log(prev);
                    var a = new Date();
                    var now = new Date(a.getFullYear(), a.getMonth()+1, a.getDate(), a.getHours(), a.getMinutes(), a.getSeconds());
                    var time = (now - prev)/1000;
                    if (time > 1 && time < 60) units = " seconds"
                    else if (time >= 60){
                        remain = time % 60
                        time -= remain
                        time/=60
                        units=" minute"
                        if (time > 1 && time < 60) units = " minutes"
                        else if (time >= 60){
                            remain = time % 60
                            time -= remain
                            time/=60
                            units=" hour"
                            if (time > 1 && time < 24) units = " hours"
                            else if (time >= 24){
                                remain = time % 24
                                time -= remain
                                time/=24
                                units=" day"
                                if (time > 1 && time < 7) units = " days"
                                else if (time >= 7){
                                    remain = time % 7
                                    time -= remain
                                    time/=7
                                    units=" week"
                                    if (time > 1) units = " weeks"
                                }
                            }
                        }
                    }
                    document.getElementById("timedif").innerHTML = "update: " + time + units + " ago";
                });
        }
        timeFunc()
    </script>
</html>