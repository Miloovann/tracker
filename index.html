<html>
    <head>
        <link href="https://fonts.googleapis.com/css2?family=Roboto&display=swap" rel="stylesheet">
        <title>COVID Hunter</title>
        <style>
            html, body{
                margin: 0;
                padding: 0;
                font-family: 'Roboto', sans-serif;
                background-color: navajowhite;
            }
            #navbar{
                margin: 0;
                padding: 0;
                width: 80%;
                height: 50px;
                background-color: #2196f3;
                color: white;
                position: fixed;
            }
            #logo{
                height: 40px;
                border-radius: 5px;
                display: inline-block;
                float: left;
                margin-left: 10px;
                margin-top: 5px;
                margin-bottom: 5px;
            }
            #stats{
                display: inline-block;
                float: right;
                height: 40px;
                margin-top: 5px;
                margin-bottom: 5px;
                font-size: 20px;
                margin-right: 10px;
                width: 50%;
                text-align: right;
            }
            #rightbar{
                width: 20%;
                background-color: #000;
                height: 120%;
                display: inline-block;
                padding: 0;
                border: none;
                position: fixed;
                top: 0;
                right: 0;
                color: white;
            }
            #rightbar * {
                padding-left: 10px;
                padding-right: 10px;
            }
            #newsandprotection{
                width: 80%;
                height: 50px;
                background-color: #111D4A;
                margin: 0;
                padding: 0;
                color: white;
                margin-top: 50px;
                position: fixed;
            }
            #main{
                width: 80%;
                padding-top: 150px;
                padding-left: 20px;
                padding-right: 20px;
                text-align: justify;
                height: 100%;
            }
            .hover:hover{
                cursor: pointer;
            }
            #navforstats p{
                display: inline-block;
                margin-left: 1%;
                margin-right: 1%;
            }
            #navforstats{
                width: 100%;
                text-align: center;
                margin: 0;
            }
            #logotxt{
                font-size: 30px;
                display: inline-block;
                margin: 10px;
            }
        </style>
    </head>
    <body onload="sgdatelink()">
        <div id="navbar">
            <img id="logo" src="logo.png" onclick="">
            <a href="https://covidhunter.netlify.app" style="text-decoration: none">
            <h1 id='logotxt' style = "font-size: 35px; text-decoration: none; color:rgb(0, 255, 64)">COVID Hunter</h1>
            </a>

            <a href="https://www.cdc.gov/coronavirus/2019-ncov/if-you-are-sick/steps-when-sick.html" target="_blank" style="text-decoration: none;">
                <span style="color: whitesmoke;font-size:20px;">Precautions</span>
            </a>
        </div>
        <div id="newsandprotection">
            <div id="navforstats">
                <p class="hover" onclick="filter('int')">Global</p>
                <p class="hover" onclick="filter('afc')">Africa</p>
                <p class="hover" onclick="filter('asa')">Asia</p>
                <p class="hover" onclick="filter('eu')">Europe</p>
                <p class="hover" onclick="filter('nam')">North America</p>
                <p class="hover" onclick="filter('sam')">South America</p>
            </div>
        </div>
        <div id="rightbar">
            <h1>WorldWide Data</h1>
            <div id="infection">
                <h2>Total Cases: </h2>
                <p id="total_cases"></p>
                <hr>
                <h2>Total Deaths: </h2>
                <p id="total_deaths"></p>
                <hr>
                <h2>Total Recovered: </h2>
                <p id="total_recovered"></p>
            </div>
        </div>
        <div class="int" style="padding-top: 130px;">
            <img src = "worldwidetotal10.svg" style="width: 26%;">
            <img src = "worldwidedeath10.svg" style="width: 26%;">
            <img src = "worldwiderecovered10.svg" style="width: 26%;">
        </div>
        <div class="eu" style="padding-top: 130px;">
            <img src = "europetotal10.svg" style="width: 26%;">
            <img src = "europedeath10.svg" style="width: 26%;">
            <img src = "europerecovered10.svg" style="width: 26%;">
        </div>
        <div class="asa" style="padding-top: 130px;">
            <img src = "asiatotal10.svg" style="width: 26%;">
            <img src = "asiadeath10.svg" style="width: 26%;">
            <img src = "asiarecovered10.svg" style="width: 26%;">
        </div>
        <div class="afc" style="padding-top: 130px;">
            <img src = "africatotal10.svg" style="width: 26%;">
            <img src = "africadeath10.svg" style="width: 26%;">
            <img src = "africarecovered10.svg" style="width: 26%;">
        </div>
        <div class="nam" style="padding-top: 130px;">
            <img src = "north Americatotal10.svg" style="width: 26%;">
            <img src = "north Americadeath10.svg" style="width: 26%;">
            <img src = "north Americarecovered10.svg" style="width: 26%;">
        </div>
        <div class="sam" style="padding-top: 130px;">
            <img src = "south Americatotal10.svg" style="width: 26%;">
            <img src = "south Americadeath10.svg" style="width: 26%;">
            <img src = "south Americarecovered10.svg" style="width: 26%;">
        </div>
    </body>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script>
        var today = new Date();
        var m = today.getMonth();
        var d = today.getDate();
        
        if(m===0){
            m = 'January';
}
            else if(m===1){
            m = 'February';
}            else if(m===2){
            m = 'March';
}
                    else if(m===3){
            m = 'April';
}
                    else if(m===4){
            m = 'May';
}
                    else if(m===5){
            m = 'June';
}
                    else if(m===6){
            m = 'July';
}
                    else if(m===7){
            m = 'August';
}
                    else if(m===8){
            m = 'September';
}
                    else if(m===9){
            m = 'October';
}
                    else if(m===10){
            m = 'November';
}
                    else if(m===11){
            m = 'December';
}
        
        $(document).ready(function() {
    $.ajax({
        type: "GET",
        url: m+d+"all.csv",
        dataType: "text",
        success: function(data) {processData(data);}
     });
});
var lines = [];
function processData(allText) {
    var allTextLines = allText.split(/\r\n|\n/);
    var headers = allTextLines[0].split(',');

    var i=212;
        var data = allTextLines[i].split(',');
        if (data.length == headers.length) {

            var tarr = [];
            for (var j=0; j<headers.length; j++) {
                tarr.push(headers[j]);
                tarr.push(data[j]);
            }
            lines.push(tarr);
        }
   // alert(lines);
    document.getElementById('total_cases').innerHTML = lines[0][3].toLocaleString();
    document.getElementById('total_deaths').innerHTML = lines[0][7].toLocaleString();
    document.getElementById('total_recovered').innerHTML = lines[0][11].toLocaleString();
}
        
        function sgdatelink(){
            for(var days=0; days<15; days++){
var date = new Date();
var last = new Date(date.getTime() - (days * 24 * 60 * 60 * 1000));
var day =last.getDate();
var month=last.getMonth();
                        if(month===0){
            month = 'Jan';
}
            else if(month===1){
            month = 'Feb';
}            else if(month===2){
            month = 'Mar';
}
                    else if(month===3){
            month = 'Apr';
}
                    else if(month===4){
            month = 'May';
}
                    else if(month===5){
            month = 'Jun';
}
                    else if(month===6){
            month = 'Jul';
}
                    else if(month===7){
            month = 'Aug';
}
                    else if(month===8){
            month = 'Sep';
}
                    else if(month===9){
            month = 'Oct';
}
                    else if(month===10){
            month = 'Nov';
}
                    else if(month===11){
            month = 'Dec';
}
            document.getElementById('minus'+days).setAttribute('src', 'SG '+day+' '+month+' Cases.svg');
            }
        }
        function filter(a){
            inter = document.getElementsByClassName('int');
            eu = document.getElementsByClassName('eu');
            asa = document.getElementsByClassName('asa');
            afc = document.getElementsByClassName('afc');
            nam = document.getElementsByClassName('nam');
            sam = document.getElementsByClassName('sam');
            for(var i=0; i<inter.length; i++){
                inter[i].style.display = 'none';
            }
            for(var i=0; i<eu.length; i++){
                eu[i].style.display = 'none';
            }
            for(var i=0; i<asa.length; i++){
                asa[i].style.display = 'none';
            }
            for(var i=0; i<afc.length; i++){
                afc[i].style.display = 'none';
            }
            for(var i=0; i<nam.length; i++){
                nam[i].style.display = 'none';
            }
            for(var i=0; i<sam.length; i++){
                sam[i].style.display = 'none';
            }
            b = document.getElementsByClassName(a);
            for(var i=0; i<b.length; i++){
                b[i].style.display = 'inline-block';
            }
        }
    </script>
    <script type="text/javascript">
        $.get('August9all.csv', function(data) {
        var build = '<table border="1" cellpadding="2" cellspacing="0" style="border-collapse: collapse" width="100%">\n';
        var head = data.split("\n");
        for (var i = 0; i < 1; i++) {
            build += "<tr>";
            currentRow = head[i].split(",");
            for (let i2 = 0; i2 < currentRow.length; i2++) {
                build += `<th>${currentRow[i2]}</th>`;
            }
            build += "</tr>";
        }
        for (var i = 1; i < head.length; i++) {
            build += "<tr>";
            currentRow = head[i].split(",");
            for (let i2 = 0; i2 < currentRow.length; i2++) {
                build += `<td>${currentRow[i2]}</td>`;
            }
            build += "</tr>";
        }
        build += "</table>";
        document.getElementById(build);
        });
    </script>
</html>
